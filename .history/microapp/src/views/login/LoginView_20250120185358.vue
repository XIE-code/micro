<template>
    <div class="body">
       <div class="box">
         <div class="box_left"> 
            <form id="loginForm" @submit.prevent="submit">
             <div class="box_left_center_box">
              <label class="Login_head">ç™»å½•</label>
                 <div class="form-group">
                        <label for="username">è´¦å·</label><br>
                        <input type="text" id="username" name="username" placeholder="è¾“å…¥è´¦å·" v-model="account" required>
                    </div>
                    <div class="form-group">
                        <label for="password">å¯†ç </label><br>
                        <input type="password" id="password" name="password" placeholder="è¾“å…¥å¯†ç " v-model="userPassword" required>
                    </div>
             <div class="form-group">
                <!-- <a href="#" class="forget">å¿˜è®°å¯†ç </a><br> -->
                <router-link to="/web/school/forget" class="forget">å¿˜è®°å¯†ç </router-link><br>
                <button type="submit">ç™»å½•</button>
             </div>
             <div class="form-group">
                <p2>æ²¡æœ‰è´¦å·ï¼Ÿ</p2><br>                 
                <div class="enroll">
            <router-link to="/web/school/create" class="enroll_body">æ³¨å†Œ</router-link>
                </div>
             </div>
          <!-- ç”¨æˆ·åè®®å’Œéšç§æ”¿ç­–é“¾æ¥ -->
                <div class="agreements">
                    <input type="checkbox" class="agree"  id="agreeCheckbox" v-model="agreed">
                <label for="agreeCheckbox">å·²é˜…è¯»å¹¶åŒæ„ä»¥ä¸‹åè®®</label> <br>
                     <router-link to="/web/school/web/user" class="enroll_body" target="_blank">ç”¨æˆ·åè®®</router-link>&nbsp;
                    <!-- <a href="https://hellomillion.oss-cn-shenzhen.aliyuncs.com/agreement/YHXY.html" target="_blank" class="agreement-link">ç”¨æˆ·<br>åè®®</a>| -->
                    <!-- <a href="https://hellomillion.oss-cn-shenzhen.aliyuncs.com/agreement/YSXY.html" target="_blank" class="agreement-link">éšç§æ”¿ç­–</a> -->
                    <router-link to="/web/school/web/privacy" class="enroll_body" target="_blank">éšç§æ”¿ç­–</router-link>         
                </div>
            </div> 
         </form>
         </div>
         <div class="box_right">
           <div class="box_right_center">
                 <h3>Micro School</h3>
                 <img src="@/assets/img/label.png" alt="">
           </div>
         </div>
       </div>
                       <!-- å¤‡æ¡ˆä¿¡æ¯ -->
                       <div class="footer">  
                  <div class="footer-logo">
                      <p2>|| Micro School</p2>
                      <label><a href="http://www.great-micro.net/liuyan/" >ğŸ’¼å…¬å¸ä¸šåŠ¡å®˜ç½‘</a></label>
                  </div>
                  <div class="footer-body">
                      <div class="footer-body-text">
                          <img src="@/assets/img/footer_1.png" alt="æ‰‹æœº">
                          <span>æ‰‹æœº:13302905510</span>
                       </div>    
                       <div class="footer-body-text">
                          <img src="@/assets/img/footer_2.png" alt="æ‰‹æœº">
                          <span>é‚®ç®±:minqiong.tan@moitta.com</span>
                       </div> 
                       <div class="footer-body-text">
                          <img src="@/assets/img/footer_1.png" alt="æ‰‹æœº">
                          <span>æ‰‹æœº:13302905510</span>
                       </div> 
                       <div class="footer-body-text">
                          <img src="@/assets/img/footer_3.png" alt="æ‰‹æœº">
                          <span>åœ°å€:æ·±åœ³å¸‚é¾™å²—åŒºé¾™åŸè¡—é“å›é¾™åŸ”ç¤¾åŒºèŠ±æ ·å¹´ä¹å¹´å¹¿åœº13å·æ¥¼Aå•å…ƒ203-116å®¤</span>
                       </div> 
                  </div>
                  <div class="footer-icp">
                      <a href="http://beian.miit.gov.cn/" target="_blank">ç²¤ICPå¤‡2024341066å·</a> | 
                      <a href="http://www.miitbeian.gov.cn/" target="_blank">ç²¤ICPå¤‡2024341066å·</a>
                  </div>
             </div>
  
    </div>

</template>
<script>
import axios from 'axios';
import {CONNECT, LoginUtil} from '@/assets/js/contants.js'
import { UtilHelper } from '@/assets/js/util_helper.js'
export default({
    created(){
        if(!UtilHelper.isCookieExpired("userData")){
            this.$router.push(LoginUtil.defaultUrl)
        }
    },
    //è§£å†³vueæ¸²æŸ“ä¸åˆ°ä½çš„æ–¹æ³•
    mounted:function() {
                  if (location.href.indexOf("#reloaded") == -1) {
                    location.href = location.href + "#reloaded";
                    location.reload();
 }
 //åˆ·æ–°é¡µé¢ï¼Œè¾¾åˆ°æ¸…ç©ºç¼“å­˜çš„æ•ˆæœã€‚æµè§ˆå™¨çš„è¿”å›æŒ‰é”®          
 if (window.name !== "noReload") {
                 window.name = "noReload";
                 location.reload();
               } else {
                 window.name = "";
               }
    },
    data(){
        return {
            account: '',
            userPassword: '',
            agreed: false, // æ·»åŠ å¤é€‰æ¡†çš„ç»‘å®šå±æ€§
        };
        
    },
    methods:{
        submit(){
            if (!this.agreed) {
             alert("è¯·å…ˆå‹¾é€‰å·²é˜…è¯»å¹¶åŒæ„ä»¥ä¸‹åè®®");
             return;
  }
        let password=""
        // è¯·æ³¨æ„ æ­¤å¤„ä»£ç åªæ˜¯ä¸ºäº†æ–¹ä¾¿å¼€å‘è€…å¼€å‘ï¼Œç­‰å¾…å¼€å‘å®Œæˆåè¦è§£é™¤ä¸‹é¢çš„æ³¨é‡Šï¼Œå¹¶åˆ é™¤axiosä»¥ä¸Šçš„æ‰€æœ‰ä»£ç ï¼ˆä¸åŒ…æ‹¬è§£é™¤æ³¨é‡Šéƒ¨åˆ†ï¼‰
        password=UtilHelper.encryptWithMD5(this.userPassword)
        this.login(this.account,password)
      },
      login(account,password){
        const that=this
        
        axios.post(`${CONNECT.generalhostpost()}/login`,{
            "account":`${account}`,
            "password":`${password}`
        }).then(response=>{
            if(response.data.code==0){
                alert(response.data.msg)
            }else if (response.data.code==1) {
                alert("ç™»å½•æˆåŠŸ")
                UtilHelper.setObjectInCookie("userData",response.data.data,20) //è®¾ç½®çš„è¿‡æœŸæ—¶é—´ä¸º20å°æ—¶
                that.$router.push(LoginUtil.defaultUrl)
            }
        }).catch(error=>{
            console.log(error);
        })
      }  
    }
})
</script >
      
 <style scoped>  
        .body{
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        
        }
             .body .box { 
            width: 88%;
            height: 88%;
            position: relative;
            margin: 2.5rem auto;
            display: flex;
            justify-content: center; /* æ°´å¹³å±…ä¸­ */
            align-items: center; /* å‚ç›´å±…ä¸­ */
              }       
            .body .box .box_left{
                width: 30%;
                height: 100%;
                background: #ffffff;
                box-shadow: 0rem 0rem 2.125rem 0rem rgba(30,2,48,0.25);
                position: absolute;
                left: 0;
                top: 0;
                overflow: hidden; /* éšè—æ»šåŠ¨æ¡ */
              }
              .body .box .box_left_center_box{
                width: 100%;
                height: 60%;
                background: #ffffff;
                position: absolute;
                left: 14%;
                top: 5rem;
              }
          
              .body .box .box_left_center_box .Login_head{
                width: 70%;
                height: 14%;
                display: flex;
                margin-left: 2.375rem;
                text-align: left;
                font-weight: 400;
                font-size: 1.75rem;
                color: #000000;
                line-height: 2.1875rem;
                text-transform: none; 
              }
          
        .body .box .box_left_center_box .form-group label{
        width: 17.4375rem;
        height: 1.25rem;
        font-family: Noto Sans SC, Noto Sans SC;
        font-weight: 400;
        font-size: .875rem;
        color: #192038;
        line-height: 1.25rem;
        text-align: left;
        font-style: normal;
        text-transform: none;
        position: relative;
        margin-left: -18.125rem;
        }
        .body .box .box_left_center_box .form-group input{
            width: 13.125rem;
            height: 2.5625rem;
            background: #FFFFFF;
            border-radius: .75rem .75rem .75rem .75rem;
            border: .125rem solid #EDF1F7;
            position: relative;
            margin-left: -6.75rem;
        }
        .body .box .box_left_center_box .form-group .forget{
            width: 17.4375rem;
        height: 1.625rem;
        margin-left: 1.875rem;
        font-weight: 400;
        font-size: 1rem;
        color: #F6453D;
        line-height: 1.625rem;
        text-align: right;
        font-style: normal;
        text-transform: none;
        margin-left: 1.125rem;
        text-decoration:none;
        
        }
        .body .box .box_left_center_box .form-group p2{
            font-family: Noto Sans SC, Noto Sans SC;
        font-weight: 400;
        font-size: 1rem;
        color: #8F9BB3;
        line-height: 1.625rem;
        text-align: center;
        font-style: normal;
        text-transform: none;
        margin-left: -5.75rem;
        }
        .body .box .box_left_center_box .form-group .enroll .enroll_body{
           color: #FF0000; /* å°†é¢œè‰²æ”¹ä¸ºçº¢è‰² */
           margin-left: -6.25rem;
           text-decoration: none;
        }

        .body .box .box_left_center_box .form-group button{
            background: #F6453D;
            border-radius: .75rem .75rem .75rem .75rem;
            width: 12.9375rem;
            height: 2.8125rem;
            font-family: Noto Sans SC, Noto Sans SC;
            font-weight: 400;
            font-size: 1rem;
            color: #FFFFFF;
            line-height: 1.5rem;
            text-align: center;
            font-style: normal;
            text-transform: none;
            position: relative;
            margin-left: -6.8125rem;
            margin-top: 2.3125rem;
            border: none; /* æˆ–è€… border: 0; */
        }

              .body .box .box_left_center_box h2{
                width: 20.4375rem;
                height: 3rem;
                font-family: Noto Sans SC, Noto Sans SC;
                font-weight: 400;
                font-size: 1.75rem;
                color: #000000;
                line-height: 3rem;
                text-align: left;
                font-style: normal;
                text-transform: none;
                position: relative;
              }
          
            .body .box .box_right{
             width: calc(100% - 30%); /* è®¡ç®—è“è‰²ç›’å­çš„å®½åº¦ï¼Œå¡«å……å‰©ä½™ç©ºé—´ */
            height: 100%;
            box-shadow: 0rem 0rem 2.125rem 0rem rgba(30,2,48,0.25);
            position: absolute;
            right: 0;
            top: 0;
            background-image: url(@/assets/img/Frame.png);
            background-size: cover;
            }

            .body .box .box_right .box_right_center{
            width: 12.5rem;
            height: 12.5rem;
            position: relative;
            top: 46%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

         .body .box .box_right .box_right_center h3{
            font-family: Noto Sans SC, Noto Sans SC;
            font-weight: 400;
            font-size: 1.75rem;
            color: #FFFFFF;
            line-height: 0rem;
            text-shadow: 0rem .25rem .25rem rgba(0,0,0,0.25);
            text-align: center;
            font-style: normal;
            text-transform: none;
            }
        
        .body .box .box_right .box_right_center img{
            position: relative;
            top: 1.25rem;
            background-size: contain;
            width: 5.9375rem;
            height: 6.75rem;
            border-radius: 0rem 0rem 0rem 0rem;
            border-radius: 0;
            display: block; /* ä½¿å›¾ç‰‡ä»¥å—çº§å…ƒç´ æ˜¾ç¤ºï¼Œä¾¿äºå±…ä¸­ */
            margin: 0 auto; /* æ°´å¹³å±…ä¸­ */
        }
        .body .box .box_left_center_box .agreements {
            font-family: Noto Sans SC, Noto Sans SC;
            font-weight: 400;
            font-size: .9375rem;
            color: #192038;
            line-height: 1.625rem;
            text-align: left;
            margin-left: 2.5rem;
        }
        .body .box .box_left_center_box .agreements .enroll_body{
            font-size: .9375rem;
            color: #F6453D;
            line-height: 1.25rem;
            text-align: left;
            position: relative;
            left: 7%;
        }
        .body .box .box_left_center_box .form-group .agreement-link {
            color: #F6453D; /* é“¾æ¥é¢œè‰² */
            margin-right: .5rem; /* é“¾æ¥ä¹‹é—´çš„é—´éš” */
            text-decoration:underline; /* æ·»åŠ ä¸‹åˆ’çº¿ä»¥è¡¨ç¤ºé“¾æ¥ */
        }
        .footer{
          display: flex;
          flex-direction: column;
          justify-content: center;
          width: 100%;
          height: 6.875rem;
          position: relative;
          background: SlateGray;
          color: aliceblue;
          font-size: .75rem;
        }

        .footer .footer-logo {
          width: 100%;
          height: 25%;
          display: flex;
          justify-content: left;
          padding-left: 3.125rem;
          gap: 3.125rem;
          align-items: center;
          position: absolute;
          top: 0;
        
        }
        .footer .footer-logo a{
          text-decoration:none;
        }
        .footer .footer-body {
          display: flex;
          justify-content: left;
          align-items: center;
          width: 100%;
          height: 70%;
          padding-left: 1.25rem;
          gap: 1.875rem;
        }
        .footer .footer-body .footer-body-text:nth-child(4){
          font-size: .875rem;
          flex-grow: 1;
        }
        .footer .footer-body img{
          height: 1.25rem;
          width: 1.25rem;
        }
        .footer .footer-icp {
          font-size: .75rem;
          color: red;
          text-align: center;
          width: 100%;
          height: 15%;
          bottom: 0;
          position: absolute;
        }
        .footer-icp a {
          text-decoration: none;
          margin: 0 .3125rem;
          color: #000;
        }
        /* å–æ¶ˆåº•éƒ¨çš„æ»šåŠ¨æ¡ */
        body {
            overflow-x: hidden;
        }
    
 </style>